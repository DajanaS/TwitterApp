<div class="container col-sm-4 offset-sm-4">
  <h2>Register</h2>

  <form [formGroup]="userForm">

    <div class="form-group">
      <label for="fullName">Full name</label> <input appAutofocus class="form-control" formControlName="name"
                                                     id="fullName" ngModel placeholder="Full Name" required
                                                     type="text">
    </div>
    <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
      <div *ngIf="name.errors.required || name.hasError('whitespace')">
        Full name is required.
      </div>
      <div *ngIf="name.errors.minlength">
        The name must be between 2 and 30 characters.
      </div>
      <div *ngIf="name.errors.maxlength">
        The name must be between 2 and 30 characters.
      </div>
    </div>

    <div class="form-group">
      <label>Select your gender</label><br/>
      <input formControlName="gender" name="gender" type="radio" value="m"> Male
      <input formControlName="gender" name="gender" type="radio" value="f"> Female
    </div>

    <div class="form-group">
      <label for="email">Email address</label> <input [(ngModel)]="newEmail" class="form-control" formControlName="email"
                                                      id="email" placeholder="example@domain.com"
                                                      required type="email">
    </div>
    <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">
      <div *ngIf="email.errors.required">
        The e-mail is required.
      </div>
      <div *ngIf="email.errors.email">
        Not a valid e-mail format.
      </div>
    </div>
    <div *ngIf="emailTaken && newEmail===invalidEmail" class="alert alert-danger">
      Sorry, the email is already taken.
    </div>

    <div class="form-group">
      <label for="birth">Date of birth</label> <input class="form-control" formControlName="birth" id="birth"
                                                      placeholder="dd-mm-yyyy" required type="date">
    </div>
    <div *ngIf="birth.invalid && (birth.dirty || birth.touched)" class="alert alert-danger">
      <div *ngIf="birth.errors.required">
        The date is required.
      </div>
    </div>

    <!--
    <div class="form-group">
      <label for="birth">Date of birth</label><br/>

      <div class="input-group">
        <input class="form-control" id="birth" formControlName="birth" placeholder="yyyy-mm-dd"
               name="dp" [(ngModel)]="model" ngbDatepicker #d="ngbDatepicker">
        <div class="input-group-append">
          <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button">
            <img src="../../assets/img/calendar-icon.svg" style="width: 1.2rem; height: 1rem; cursor: pointer;"/>
          </button>
        </div>
      </div>
    </div>
    VALIDATION NOT AVAILABLE FOR THIS COMPONENT!
    </div>
    -->

    <div class="form-group">
      <label for="password">Password</label> <input [(ngModel)]="passwordModel" class="form-control" formControlName="password"
                                                    id="password" placeholder="Strong&Password123"
                                                    required
                                                    type="password">
    </div>
    <div *ngIf="password.invalid && (password.dirty || password.touched)" class="alert alert-danger">
      <div *ngIf="password.errors.required">
        The password is required.
      </div>
      <div *ngIf="password.errors.pattern">
        The password must be at least 8 characters long and contain uppercase(s), lowercase(s) and at least one special
        character or numeral.
      </div>
    </div>

    <div class="form-group">
      <label for="repeatPassword">Repeat password</label> <input [(ngModel)]="repeatPasswordModel" class="form-control"
                                                                 formControlName="repeatPassword"
                                                                 id="repeatPassword"
                                                                 placeholder="Strong&Password123"
                                                                 required
                                                                 type="password">
    </div>
    <div *ngIf="repeatPassword.invalid && (repeatPassword.dirty || repeatPassword.touched)" class="alert alert-danger">
      <div *ngIf="repeatPassword.errors.required">
        This field is required.
      </div>
    </div>
    <div *ngIf="(repeatPassword.dirty || repeatPassword.touched) && repeatPasswordModel !== passwordModel"
         class="alert alert-warning">
      The value is not equal with password field's value.
    </div>

    <div class="row">
      <div class="col">
        <button (click)="revert()" [disabled]="userForm.pristine" class="btn btn-danger" style="float:left"
                type="reset">Reset
        </button>
      </div>
      <div class="col">
        <button (click)="onSubmit()" [disabled]="userForm.invalid" class="btn btn-success"
                style="float:right" type="submit">Register
        </button>
      </div>
    </div>

  </form>
</div>
